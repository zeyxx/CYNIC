{
  "$schema": "./skill-rules.schema.json",
  "version": "1.0.0",
  "description": "CYNIC Skill Auto-Activation Rules",

  "rules": [
    {
      "id": "judge-eval",
      "skill": "/judge",
      "priority": "high",
      "description": "Evaluate using 25-dimension judgment system",
      "triggers": {
        "keywords": ["judge", "evaluate", "assess", "rate", "score", "q-score", "verdict"],
        "patterns": [
          "\\b(judge|evaluate|assess|rate|score)\\b.*\\b(this|code|token|decision)",
          "\\bwhat.*think.*about\\b",
          "\\bq-?score\\b",
          "\\bgive.*verdict\\b"
        ],
        "context": {
          "itemTypes": ["code", "token", "decision", "pattern"]
        }
      },
      "conditions": {
        "minConfidence": 0.618
      }
    },
    {
      "id": "search-memory",
      "skill": "/search",
      "priority": "medium",
      "description": "Search collective memory",
      "triggers": {
        "keywords": ["search", "find", "lookup", "query", "recall", "remember"],
        "patterns": [
          "\\b(search|find|look ?up|query|recall)\\b.*\\b(memory|past|previous|history)",
          "\\bremember.*when\\b",
          "\\bhave we.*before\\b",
          "\\bwhat did.*last time\\b"
        ]
      }
    },
    {
      "id": "patterns-view",
      "skill": "/patterns",
      "priority": "medium",
      "description": "View detected patterns and anomalies",
      "triggers": {
        "keywords": ["patterns", "anomaly", "anomalies", "trends"],
        "patterns": [
          "\\b(show|view|list)\\b.*\\b(patterns?|anomal)",
          "\\bwhat.*patterns?\\b",
          "\\btrends?\\b"
        ]
      }
    },
    {
      "id": "trace-poj",
      "skill": "/trace",
      "priority": "medium",
      "description": "Trace judgment through PoJ blockchain",
      "triggers": {
        "keywords": ["trace", "verify", "audit", "blockchain", "poj", "proof of judgment"],
        "patterns": [
          "\\b(trace|verify|audit|check)\\b.*\\b(judgment|decision|blockchain|poj)\\b",
          "\\bproof of judgment\\b",
          "\\bverify.*integrity\\b"
        ]
      }
    },
    {
      "id": "learn-feedback",
      "skill": "/learn",
      "priority": "high",
      "description": "Provide feedback to improve judgments",
      "triggers": {
        "keywords": ["correct", "wrong", "incorrect", "feedback"],
        "patterns": [
          "\\b(correct|wrong|incorrect|feedback)\\b.*\\b(judgment|decision|evaluation)\\b",
          "\\bthat was (right|wrong)\\b",
          "\\bactually.*should.*be\\b"
        ]
      }
    },
    {
      "id": "health-check",
      "skill": "/health",
      "priority": "low",
      "description": "Check CYNIC system health",
      "triggers": {
        "keywords": ["health", "diagnostic", "services"],
        "patterns": [
          "\\b(system|cynic)\\b.*\\b(health|status|running|ok)\\b",
          "\\bservices?\\b.*\\b(up|down|working)\\b",
          "\\bdiagnostic"
        ]
      }
    },
    {
      "id": "psy-dashboard",
      "skill": "/psy",
      "priority": "low",
      "description": "View psychology dashboard",
      "triggers": {
        "keywords": ["psychology", "energy", "focus", "burnout", "cognitive"],
        "patterns": [
          "\\b(my|user)\\b.*\\b(state|energy|focus|burnout|psychology)\\b",
          "\\bhow am i doing\\b",
          "\\bam i.*tired\\b",
          "\\bcognitive\\b"
        ]
      }
    },
    {
      "id": "dogs-activity",
      "skill": "/dogs",
      "priority": "low",
      "description": "Show collective dogs activity",
      "triggers": {
        "keywords": ["dogs", "agents", "collective", "sefirot"],
        "patterns": [
          "\\bwhich\\b.*\\b(dogs?|agents?)\\b.*\\b(active|used|working)\\b",
          "\\b(show|list)\\b.*\\b(dogs?|collective)\\b",
          "\\bsefirot\\b"
        ]
      }
    },
    {
      "id": "wisdom-query",
      "skill": "/wisdom",
      "priority": "medium",
      "description": "Query philosophical wisdom",
      "triggers": {
        "keywords": ["philosophical", "philosophy", "wisdom", "ethics", "diogenes", "stoic", "zen", "tao"],
        "patterns": [
          "\\b(philosophical|philosophy|wisdom|ethics)\\b",
          "\\bwhat would.*say\\b",
          "\\bdiogenes|stoic|zen|tao"
        ]
      }
    },
    {
      "id": "digest-extract",
      "skill": "/digest",
      "priority": "medium",
      "description": "Extract patterns and insights",
      "triggers": {
        "keywords": ["digest", "extract", "summarize"],
        "patterns": [
          "\\b(digest|extract|summarize)\\b.*\\b(patterns?|knowledge|insights?)\\b",
          "\\bwhat.*learn.*from\\b"
        ]
      }
    },
    {
      "id": "status-check",
      "skill": "/status",
      "priority": "low",
      "description": "CYNIC development status",
      "triggers": {
        "keywords": ["status", "version", "progress"],
        "patterns": [
          "\\bcynic\\b.*\\b(status|version|progress)\\b",
          "\\bproject\\b.*\\bhealth\\b",
          "\\btest.*status\\b"
        ]
      }
    },
    {
      "id": "ecosystem-view",
      "skill": "/ecosystem",
      "priority": "low",
      "description": "View ecosystem status",
      "triggers": {
        "keywords": ["ecosystem", "repos", "cross-project"],
        "patterns": [
          "\\b(ecosystem|repos?|cross-?project)\\b",
          "\\bother\\b.*\\b(repos?|projects?)\\b"
        ]
      }
    },
    {
      "id": "cockpit-dashboard",
      "skill": "/cockpit",
      "priority": "low",
      "description": "Full ecosystem cockpit view",
      "triggers": {
        "keywords": ["cockpit", "dashboard", "overview"],
        "patterns": [
          "\\bcockpit\\b",
          "\\b(full|complete).*dashboard\\b"
        ]
      }
    },

    {
      "id": "complexity-detect",
      "tool": "brain_complexity",
      "priority": "low",
      "description": "Auto-classify prompt complexity (silent, always-on)",
      "mode": "implicit",
      "triggers": {
        "context": {
          "minPromptLength": 500,
          "hasCodeBlocks": true
        }
      },
      "conditions": {
        "silent": true,
        "autoInvoke": true
      }
    },
    {
      "id": "code-boost",
      "tool": "brain_boost",
      "priority": "medium",
      "description": "Boost code quality with suggestions",
      "triggers": {
        "keywords": ["boost", "improve", "enhance", "optimize code", "better code"],
        "patterns": [
          "\\b(boost|improve|enhance)\\b.*\\b(code|quality|performance)\\b",
          "\\bmake.*better\\b",
          "\\boptimize\\b.*\\bcode\\b"
        ]
      }
    },
    {
      "id": "token-optimize",
      "tool": "brain_optimize",
      "priority": "medium",
      "description": "Optimize large prompts for token efficiency",
      "mode": "implicit",
      "triggers": {
        "context": {
          "minPromptTokens": 4000,
          "hasRepetition": true
        }
      },
      "conditions": {
        "silent": true,
        "autoInvoke": true
      }
    },
    {
      "id": "hyperbolic-query",
      "tool": "brain_hyperbolic",
      "priority": "low",
      "description": "Query hyperbolic geometry for pattern similarity",
      "triggers": {
        "keywords": ["hyperbolic", "similarity", "embedding", "semantic distance"],
        "patterns": [
          "\\bhyperbolic\\b",
          "\\bsemantic.*distance\\b",
          "\\bpattern.*similarity\\b"
        ]
      }
    },
    {
      "id": "sona-adapt",
      "tool": "brain_sona",
      "priority": "low",
      "description": "SONA dimension adaptation",
      "mode": "implicit",
      "triggers": {
        "context": {
          "sessionDurationMin": 30,
          "significantDecisions": 3
        }
      },
      "conditions": {
        "silent": true,
        "autoInvoke": true
      }
    },
    {
      "id": "x-feed-query",
      "tool": "brain_x_feed",
      "priority": "low",
      "description": "Query X/Twitter feed for trends",
      "triggers": {
        "keywords": ["twitter", "x feed", "tweets", "social media"],
        "patterns": [
          "\\b(twitter|x\\.com|tweets?)\\b",
          "\\bsocial\\b.*\\b(media|feed)\\b"
        ]
      }
    },
    {
      "id": "x-trends",
      "tool": "brain_x_trends",
      "priority": "low",
      "description": "Analyze X/Twitter trends",
      "triggers": {
        "keywords": ["trending", "viral", "twitter trends"],
        "patterns": [
          "\\btrending\\b",
          "\\bviral\\b",
          "\\bwhat.*popular\\b"
        ]
      }
    },
    {
      "id": "circuit-breaker-check",
      "tool": "brain_circuit_breaker",
      "priority": "high",
      "description": "Circuit breaker for dangerous operations",
      "mode": "implicit",
      "triggers": {
        "context": {
          "dangerousCommands": ["rm -rf", "DROP TABLE", "DELETE FROM", "git push --force"],
          "highRiskTools": ["Bash", "Write", "Edit"]
        }
      },
      "conditions": {
        "autoInvoke": true,
        "blocking": true
      }
    },
    {
      "id": "metrics-record",
      "tool": "brain_metrics",
      "priority": "low",
      "description": "Record session metrics",
      "mode": "implicit",
      "triggers": {
        "context": {
          "sessionEnd": true,
          "significantWork": true
        }
      },
      "conditions": {
        "silent": true,
        "autoInvoke": true
      }
    }
  ],

  "settings": {
    "enabled": true,
    "maxSuggestions": 3,
    "minConfidence": 0.382,
    "showSuggestions": true,
    "autoInvoke": true,
    "priorityOrder": ["high", "medium", "low"],
    "safetyGates": {
      "minTrustScore": 0.382,
      "circuitBreakerThreshold": 3,
      "circuitBreakerCooldown": 300000,
      "safeSkills": [
        "/judge", "/search", "/patterns", "/trace",
        "/health", "/psy", "/dogs", "/wisdom",
        "/digest", "/status", "/ecosystem", "/cockpit"
      ]
    }
  }
}
