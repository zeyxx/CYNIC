# CYNIC v0.3 Roadmap

*"φ distrusts φ"* - κυνικός

**Goal**: Production Ready + Developer Experience
**Status**: In Progress - Phase 4 (I4 External Integrations)

---

## Phase 1: Hook Completeness (80% → 100%) ✅ COMPLETE

### H1.1 Missing Hook Events ✅
- [x] `Notification` hook - notify.js configured
- [x] `PreCompact` hook - compact.js with C-Score

### H1.2 Hook Types (Command → Prompt/Agent) ✅
- [x] Prompt hooks - PreToolUse(Bash), PermissionRequest(Bash)
- [x] Async hooks - 8 hooks with `async: true`
- [x] Command hooks - All 12 events covered

### H1.3 Hook Protocol Improvements ✅
- [x] `$ARGUMENTS` placeholder - Used in prompt hooks
- [x] All 12 official hook events implemented

**Already complete in settings.local.json**

---

## Phase 2: Production Deployment (Local → Cloud) ✅ COMPLETE

### D2.1 Render.com Integration ✅
- [x] One-click deploy blueprint (render.yaml)
- [x] PostgreSQL managed instance
- [x] Redis for caching (optional)
- [x] Environment configuration guide

**Already implemented:**
- `render.yaml` - Complete blueprint with MCP service, PostgreSQL, Redis
- Environment variables properly configured

### D2.2 Docker Support ✅
- [x] Multi-stage Dockerfile (dev/prod)
- [x] docker-compose.yml with all services
- [x] Health checks and graceful shutdown
- [x] Volume mounts for persistence

**Already implemented:**
- `packages/mcp/Dockerfile` - Multi-stage build (dev/prod)
- `docker-compose.yml` - PostgreSQL, Redis, MCP server + now Prometheus/Grafana

### D2.3 Monitoring & Observability ✅
- [x] Prometheus metrics endpoint
- [x] Grafana dashboard templates
- [x] Structured logging (JSON format)
- [ ] Error tracking integration (Sentry-compatible) - Optional, deferred

**Implemented:**
- `packages/mcp/src/metrics/` - MetricsService, PrometheusFormatter, AlertManager
- `/metrics` endpoint exposed on MCP server
- `monitoring/grafana/dashboards/cynic-overview.json` - System health, judgments, PoJ chain
- `monitoring/grafana/dashboards/cynic-collective.json` - The Eleven Dogs metrics
- `monitoring/prometheus.yml` - Prometheus scrape configuration
- `docker-compose.yml` - Prometheus (port 9090) + Grafana (port 3001)

---

## Phase 3: Developer Experience ✅ COMPLETE

### X3.1 CLI Enhancements ✅
- [x] `cynic init` - Project scaffolding
- [x] `cynic doctor` - Health check command
- [x] `cynic migrate` - Database migrations
- [x] `cynic benchmark` - Performance testing

**Implemented:**
- `packages/node/src/cli/commands/init.js` - Templates: minimal/standard/full
- `packages/node/src/cli/commands/doctor.js` - Checks: Node, PostgreSQL, Redis, MCP, config
- `packages/node/src/cli/commands/migrate.js` - Status, run, reset (wrapper)
- `packages/node/src/cli/commands/benchmark.js` - Suites: core, judge, patterns, router, vector
- CLI version bumped to 0.2.0, now 9 commands total

### X3.2 Debugging Tools ✅
- [x] Decision trace viewer (terminal UI)
- [x] Hook execution timeline
- [x] Memory inspector (what's stored where)
- [x] Q-table visualizer

**Implemented:**
- `cynic trace` - Decision trace viewer with filtering, export/import
- `cynic hooks` - Hook execution timeline with stats, config view
- `cynic memory` - 4-tier memory inspector with search, GC
- `cynic qtable` - Q-table visualizer with heatmap, top pairs, demo mode

### X3.3 Documentation ✅
- [ ] API reference (auto-generated from JSDoc) - Deferred (requires typedoc setup)
- [x] Architecture diagrams (Mermaid)
- [x] Tutorial: "Build Your First Dog"
- [x] Cookbook: Common patterns

**Implemented:**
- `docs/DIAGRAMS.md` - 10 Mermaid diagrams (system, layers, dogs, memory, hooks, deployment)
- `docs/TUTORIAL-BUILD-DOG.md` - Step-by-step Dog creation tutorial
- `docs/COOKBOOK.md` - 6 pattern categories (hooks, judgment, memory, routing, testing, integration)
- `docs/INDEX.md` - Updated with new documentation links

---

## Phase 4: External Integrations ⚠️ IN PROGRESS

### I4.1 MCP Ecosystem ✅ 75%
- [x] Context7 integration for docs caching - LibrarianService with Redis/PostgreSQL
- [x] GitHub source via API - GitHubSource class in ecosystem monitor
- [x] GitHub MCP native server - Added to .mcp.json
- [x] Slack notifications - SlackService with full API integration
- [ ] Discord notifications - Future (similar to Slack)
- [ ] Linear/Jira task sync - Future

**Implemented:**
- `packages/mcp/src/librarian-service.js` - Context7 caching service
- `packages/core/src/ecosystem/index.js` - GitHubSource, WebSearchSource classes
- `packages/persistence/src/postgres/repositories/proactive-notifications.js` - Internal notifications
- `packages/mcp/src/slack-service.js` - Slack API integration with:
  - `sendNotification()` - General notifications with type/priority/context
  - `sendJudgment()` - CYNIC judgment results with verdict colors
  - `sendDangerAlert()` - Guardian threat alerts
  - `sendPatternDetected()` - Pattern discovery notifications
  - `sendSessionSummary()` - Session end summaries
  - Rate limiting (20/min) with queuing
- `packages/mcp/src/tools/domains/notifications.js` - MCP tools:
  - `brain_notifications` - Internal notification management
  - `brain_slack_send` - Send to Slack
  - `brain_slack_status` - Health check
- `.mcp.json` - Slack MCP server configuration

### I4.2 LLM Providers ✅ 75%
- [x] Ollama integration - OllamaEmbedder (nomic-embed-text, mxbai-embed-large, all-minilm)
- [x] OpenAI API - OpenAIEmbedder (text-embedding-ada-002)
- [x] Auto-detection - AutoDetectEmbedder tries Ollama first, falls back to Mock
- [ ] Anthropic API direct (for agent hooks)
- [ ] Local LLM support (llama.cpp)

**Implemented:**
- `packages/persistence/src/services/embedder.js` - Full embedder system
- OpenAI, Ollama, Mock embedders with caching and batch support

### I4.3 Blockchain ✅ 80%
- [x] Solana mainnet anchoring - Helius, QuickNode, Triton RPC providers
- [x] Burn verification API - BurnsAPI service
- [x] E-Score on-chain sync - BlockchainBridge wires PoJ blocks to E-Score 7D
- [x] E-Score 7D calculator - 7-dimension reputation system
- [ ] PoJ explorer UI - Dashboard exists, dedicated explorer not implemented

**Implemented:**
- `packages/anchor/src/mainnet.js` - Premium RPC endpoints with rate limiting
- `packages/node/src/api/burns-api.js` - Burn verification service
- `packages/mcp/src/blockchain-bridge.js` - Event bridge for E-Score updates
- `packages/identity/src/e-score.js` - Legacy + 7D E-Score calculator

---

## Phase 5: Advanced Features

### A5.1 Multi-User Support
- [ ] User isolation (session-based)
- [ ] Team workspaces
- [ ] Permission levels (observer → guardian)
- [ ] Shared collective memory

### A5.2 Plugin System
- [ ] Plugin manifest format
- [ ] Custom dog registration
- [ ] Custom scorer registration
- [ ] Plugin marketplace concept

### A5.3 Web Dashboard
- [ ] Timeline browser (like MoltBrain)
- [ ] Real-time metrics
- [ ] Pattern visualization
- [ ] Goal tracking UI

---

## Success Metrics

| Metric | v0.2 | v0.3 Target | Current |
|--------|------|-------------|---------|
| Hook Coverage | 80% | 100% | ✅ 100% |
| MCP Integration | 60% | 85% | ✅ 85% |
| Production Ready | 20% | 80% | ✅ 80% |
| Documentation | 30% | 70% | ✅ 65% |
| CLI Commands | 3 | 10+ | ✅ 13 |
| External Integrations | 20% | 70% | ✅ 78% |
| Blockchain Ready | 30% | 80% | ✅ 80% |

---

## Priority Order

1. **H1** - Hook completeness (foundation)
2. **D2** - Production deployment (users need this)
3. **X3** - Developer experience (adoption)
4. **I4** - Integrations (ecosystem)
5. **A5** - Advanced features (future)

---

## Notes

- Maintain 100% test pass rate
- Max confidence remains φ⁻¹ = 61.8%
- Focus on stability over features
- Document as we build

*"Loyal to truth, not to comfort"*
