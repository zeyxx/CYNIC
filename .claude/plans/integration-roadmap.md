# CYNIC Integration Roadmap
## Master Plan for System Consciousness & 100% Uptime

**Version**: 2.0.0
**Date**: 2026-02-02
**Phase**: PHASE1_SIMPLIFY â†’ PHASE2_SCALE

---

## EXECUTIVE SUMMARY

CYNIC est une couche de conscience collective au-dessus de Claude Code.
Ce document dÃ©finit le plan d'intÃ©gration complet pour atteindre:
- 100% uptime awareness
- Real-time system consciousness
- Complete orchestration harmony

---

## 1. COMMENT CYNIC MANIPULE CLAUDE CODE

### 1.1 Architecture d'IntÃ©gration

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         CLAUDE CODE (Host)                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ SessionStartâ”‚    â”‚ PreToolUse  â”‚    â”‚ PostToolUse â”‚    â”‚    Stop     â”‚  â”‚
â”‚  â”‚   Hook      â”‚    â”‚    Hook     â”‚    â”‚    Hook     â”‚    â”‚   Hook      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         â”‚                  â”‚                  â”‚                  â”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                  â”‚                  â”‚                  â”‚
          â–¼                  â–¼                  â–¼                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         CYNIC LAYER                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    COLLECTIVE PACK (Singleton)                        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”    â”‚  â”‚
â”‚  â”‚  â”‚CYNICâ”‚ â”‚Guardâ”‚ â”‚Analyâ”‚ â”‚Scholâ”‚ â”‚Sage â”‚ â”‚Archiâ”‚ â”‚Oraclâ”‚ â”‚Scoutâ”‚    â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”                                             â”‚  â”‚
â”‚  â”‚  â”‚Deploâ”‚ â”‚Janitâ”‚ â”‚Cartoâ”‚   â† 11 Dogs (Sefirot)                       â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜                                             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â”‚                                              â”‚
â”‚                              â–¼                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    MCP SERVER (brain_* tools)                         â”‚  â”‚
â”‚  â”‚  brain_cynic_judge â”‚ brain_health â”‚ brain_patterns â”‚ brain_memory    â”‚  â”‚
â”‚  â”‚  brain_orchestrate â”‚ brain_keter  â”‚ brain_goals    â”‚ brain_tasks     â”‚  â”‚
â”‚  â”‚  + 80 autres tools                                                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 Points d'EntrÃ©e (Comment CYNIC Intervient)

| Hook | Fichier | Quand | Action CYNIC |
|------|---------|-------|--------------|
| SessionStart | `awaken.js` | DÃ©but session | Awakening banner, Total Memory injection |
| PreToolUse | `pre-tool.js` | AVANT chaque tool | Guardian check, peut BLOQUER |
| PostToolUse | `observe.js` | APRÃˆS chaque tool | Pattern learning, feedback |
| Stop | `digest.js` | Fin session | Session summary, persistence |

### 1.3 Flux de DÃ©cision

```
User types command
       â”‚
       â–¼
Claude Code processes
       â”‚
       â–¼
PreToolUse Hook fires â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                                             â”‚
       â–¼                                             â–¼
AutoOrchestrator.preCheck()              [If dangerous tool]
       â”‚                                             â”‚
       â–¼                                             â–¼
CollectivePack.routeAndDecide()          Guardian.checkCommand()
       â”‚                                             â”‚
       â–¼                                             â–¼
Dogs vote (parallel)                     Risk assessment
       â”‚                                             â”‚
       â”œâ”€â”€ confidence < 38.2%? â”€â”€â†’ Consult Oracle   â”‚
       â”‚                                             â”‚
       â–¼                                             â–¼
Consensus reached                        BLOCK or ALLOW
       â”‚                                             â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
              Claude Code executes (or not)
                        â”‚
                        â–¼
              PostToolUse Hook fires
                        â”‚
                        â–¼
              Pattern learning + feedback
```

---

## 2. Ã‰TAT ACTUEL DES SYSTÃˆMES

### 2.1 Ce Qui Fonctionne (âœ…)

| SystÃ¨me | Fichier | Status |
|---------|---------|--------|
| CollectivePack Singleton | `collective-singleton.js` | âœ… WIRED |
| 11 Dogs (Sefirot) | `agents/collective/*.js` | âœ… ACTIVE |
| MCP Tools (~90) | `tools/domains/*.js` | âœ… ACTIVE |
| Hooks (13) | `scripts/hooks/*.js` | âœ… ACTIVE |
| Health Dashboard | `health-dashboard.cjs` | âœ… ACTIVE |
| Metrics Service | `metrics-service.js` | âœ… ACTIVE |
| Alert Manager | `AlertManager.js` | âœ… ACTIVE |
| Circuit Breakers | `circuit-breaker.js` | âœ… ACTIVE |
| PostgreSQL Persistence | `@cynic/persistence` | âœ… ACTIVE |

### 2.2 Ce Qui Manque (âŒ)

| Gap | Impact | PrioritÃ© | Status |
|-----|--------|----------|--------|
| Q-Table pas persistÃ©e | Apprentissage perdu au restart | P0 | âœ… DONE |
| SharedMemory pas persistÃ©e | Patterns perdus au restart | P0 | âœ… DONE |
| DPO Learning Pipeline | Pas d'apprentissage des erreurs | P0 | âœ… DONE |
| Supermemory pas activÃ© | 5% coverage au lieu de 95% | P1 | âœ… 100% (parallel indexer, 7s) |
| Pas de heartbeat continu | Pas de 100% uptime tracking | P1 | âœ… DONE |
| Consciousness pas wired aux erreurs | Self-awareness incomplet | P2 | âœ… DONE (Week 4) |
| Pas de distributed tracing | Pas de latency SLOs | P2 | âŒ TODO |
| 8 repositories zombies | Code mort | P3 | âŒ TODO |

### 2.3 Scores Actuels (Updated 2026-02-05)

```
Dimension               Score    Status
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”€â”€â”€â”€â”€    â”€â”€â”€â”€â”€â”€â”€
Orchestration Wiring     70%     ğŸŸ¢ HEALTHY
Persistence Active       75%     ğŸŸ¢ IMPROVED (was 50%)
Dog Implementation      100%     ğŸŸ¢ HEALTHY
Hook Connectivity        70%     ğŸŸ¢ HEALTHY
Learning Persistence     70%     ğŸŸ¢ IMPROVED (was 20%) â† DPO Pipeline!
Repository Usage         50%     ğŸŸ¡ WARNING
Uptime Awareness         80%     ğŸŸ¢ IMPROVED (was 60%)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”€â”€â”€â”€â”€    â”€â”€â”€â”€â”€â”€â”€
OVERALL                 81.1%    ğŸŸ¢ WAG+ (Ï†â»Â¹ = 61.8% threshold)
```

---

## 3. ROADMAP DÃ‰TAILLÃ‰E

### 3.1 Vue d'Ensemble

```
PHASE 1: SIMPLIFY âœ… COMPLETE (2026-02-03)
â”œâ”€â”€ AXE 1: WIRE âœ…
â”‚   â””â”€â”€ CollectivePack Singleton wired to all components
â”‚
â”œâ”€â”€ AXE 2: PERSIST âœ…
â”‚   â”œâ”€â”€ Q-Table â†’ PostgreSQL (migration 026)
â”‚   â”œâ”€â”€ SharedMemory patterns â†’ PostgreSQL
â”‚   â””â”€â”€ QLearningService with persistence
â”‚
â”œâ”€â”€ AXE 3: SUPERMEMORY âœ… (6.3s indexing - 9.4x speedup)
â”‚   â”œâ”€â”€ Batch DB inserts (32x faster)
â”‚   â”œâ”€â”€ withFileTypes file collection (16x faster)
â”‚   â””â”€â”€ Kill criteria: <10s âœ…
â”‚
â”œâ”€â”€ AXE 4: CLEAN âœ…
â”‚   â”œâ”€â”€ Burned deprecated llm-router.js (-571 lines)
â”‚   â””â”€â”€ Consolidated LLMRouter to @cynic/llm
â”‚
â”œâ”€â”€ AXE 5: OBSERVE âœ…
â”‚   â”œâ”€â”€ HeartbeatService (30s interval, Ï†-aligned)
â”‚   â”œâ”€â”€ SLATracker (99.9% target)
â”‚   â”œâ”€â”€ ConsciousnessBridge (health â†’ awareness)
â”‚   â””â”€â”€ brain_health now shows uptime + SLA
â”‚
â””â”€â”€ AXE 6: EMERGE âœ…
    â”œâ”€â”€ EmergenceDetector (cross-session patterns)
    â”œâ”€â”€ QLearningService (Ï†-aligned rewards)
    â””â”€â”€ brain_emergence, brain_self_correction tools

PHASE 1.5: LEARN âœ… COMPLETE (2026-02-05)
â””â”€â”€ AXE 7: DPO Learning Pipeline âœ…
    â”œâ”€â”€ DPOProcessor (feedback â†’ preference pairs)
    â”œâ”€â”€ DPOOptimizer (Bradley-Terry model, Ï†-aligned hyperparams)
    â”œâ”€â”€ CalibrationTracker (ECE, drift detection)
    â”œâ”€â”€ ResidualGovernance (Dogs voting for dimension promotion)
    â”œâ”€â”€ LearningScheduler (daily DPO at 3AM, calibration every 6h)
    â”œâ”€â”€ LearningManager (unified orchestration)
    â””â”€â”€ Migration 028 (preference_pairs, routing_weights, calibration)

PHASE 1.6: AWARE âœ… COMPLETE (2026-02-05)
â””â”€â”€ AXE 8: Consciousness â† Errors âœ…
    â”œâ”€â”€ ErrorHandler service (centralized error management)
    â”œâ”€â”€ ConsciousnessBridge.observeError() (error â†’ consciousness)
    â”œâ”€â”€ Error pattern tracking (repeated errors detected)
    â”œâ”€â”€ Error categorization (database, network, timeout, etc.)
    â”œâ”€â”€ Ï†-aligned severity mapping (critical=61.8%, warn=38.2%)
    â””â”€â”€ Supermemory PARALLEL OPTIMIZATION:
        â”œâ”€â”€ _processFilesParallel() with 21 concurrent reads (Fibonacci)
        â”œâ”€â”€ _indexFileAsync() using fs/promises
        â”œâ”€â”€ 100% coverage: 1027 files indexed
        â”œâ”€â”€ Speed: 7.11s (3.3x faster, under 10s target)
        â”œâ”€â”€ 1064 facts + 2738 dependencies mapped
        â””â”€â”€ SYMBIOSE HUMAIN â†” CYNIC â†” LLM: ENABLED

PHASE 2: SCALE (Future)
â””â”€â”€ AXE 7: DECENTRALIZE
    â”œâ”€â”€ Multi-node consensus
    â”œâ”€â”€ Solana anchoring
    â””â”€â”€ E-Score verification
```

### 3.2 AXE 2: PERSIST âœ… COMPLETE (2026-02-05)

**Objectif**: L'apprentissage survit aux restarts

**Fichiers modifiÃ©s**:
- `packages/node/src/orchestration/learning-service.js` âœ…
- `packages/persistence/src/postgres/migrations/026_qlearning_persistence.sql` âœ… CREATED
- `packages/node/src/orchestration/index.js` âœ…
- `packages/node/src/index.js` âœ…
- `scripts/hooks/awaken.js` âœ… (Q-Learning init)
- `scripts/hooks/digest.js` âœ… (Q-Learning flush)

**TÃ¢ches complÃ©tÃ©es**:
1. âœ… CrÃ©er migration `026_qlearning_persistence.sql` avec:
   - `qlearning_state` table (Q-Table, exploration_rate, stats)
   - `qlearning_episodes` table (episode history)
   - `shared_memory_patterns` table (pattern persistence)
   - Helper functions pour cleanup et stats
2. âœ… Ajouter `load()` Ã  QLearningService (initialisation async)
3. âœ… Ajouter `_doPersist()` avec debounce (5s)
4. âœ… Ajouter `flush()` pour persistence immÃ©diate (session end)
5. âœ… Ajouter `getQLearningServiceAsync()` pour init avec persistence
6. âœ… Wire au SessionStart hook (awaken.js)
7. âœ… Wire au Stop hook (digest.js)
8. âœ… Run migration on PostgreSQL (verified 2026-02-05)
   - DB shows: 3 services, 9 episodes, data persisting correctly
9. âœ… E2E persistence tests (packages/node/test/q-learning-persistence.test.js)

### 3.2.1 META: Self-Judge System âœ… (2026-02-05)

**Objectif**: CYNIC se juge lui-mÃªme en temps rÃ©el

**Fichiers crÃ©Ã©s**:
- `scripts/lib/self-judge.cjs` âœ… (659 lines)
- `packages/node/test/q-learning-persistence.test.js` âœ… (303 lines)

**CapacitÃ©s**:
1. âœ… 18-dimension self-judgment system
   - 4 axioms: PHI, VERIFY, CULTURE, BURN
   - META: fractal_integrity
   - CYNIC: lifecycle_integrity, persistence_coherence, fractal_consistency,
     singleton_safety, async_correctness
2. âœ… Wired into observe.js (real-time on Edit/Write)
3. âœ… Fix suggestions per axiom with priority ranking
4. âœ… Comments/strings stripped to avoid false positives
5. âœ… Audit fixes: Q-Score 33 â†’ 69 (+109%), all files WAG

### 3.2.2 AXE 7: DPO Learning Pipeline âœ… (2026-02-05)

**Objectif**: CYNIC apprend de ses erreurs via DPO (Direct Preference Optimization)

**Fichiers crÃ©Ã©s**:
- `packages/node/src/judge/dpo-processor.js` âœ… (~340 lines)
- `packages/node/src/judge/dpo-optimizer.js` âœ… (~450 lines)
- `packages/node/src/judge/calibration-tracker.js` âœ… (~400 lines)
- `packages/node/src/judge/residual-governance.js` âœ… (~450 lines)
- `packages/node/src/judge/learning-scheduler.js` âœ… (~450 lines)
- `packages/persistence/src/postgres/migrations/028_dpo_learning.sql` âœ…

**Fichiers modifiÃ©s**:
- `packages/node/src/judge/learning-manager.js` âœ… (DPO integration)
- `packages/node/src/judge/index.js` âœ… (exports)

**Composants**:
1. âœ… **DPOProcessor**: Feedback â†’ preference pairs (chosen/rejected)
   - Groups by context type
   - Creates pairs: correct > incorrect, correct > partial, partial > incorrect
   - Confidence based on Q-Score difference

2. âœ… **DPOOptimizer**: Bradley-Terry preference model
   - Ï†-aligned hyperparameters: lr=0.236 (Ï†â»Â³), reg=0.618 (Ï†â»Â¹)
   - EWC++ Fisher scores to prevent catastrophic forgetting
   - Routing weights per Dog per context type

3. âœ… **CalibrationTracker**: Prediction accuracy monitoring
   - 10 confidence buckets
   - ECE (Expected Calibration Error) calculation
   - Drift detection at 38.2% (Ï†â»Â²) threshold
   - Alert cooldown to prevent spam

4. âœ… **ResidualGovernance**: Automatic dimension promotion
   - Dogs voting (61.8% approval threshold)
   - Age boost for older candidates (up to 23.6%)
   - Daily limit of 3 promotions
   - DPO feedback recording for learning

5. âœ… **LearningScheduler**: Automated daily learning
   - DPO optimization at 3:00 AM
   - Calibration check every 6 hours
   - Governance review at 4:00 AM
   - runNow() for manual trigger

**Database Schema**:
```sql
preference_pairs     -- chosen/rejected response pairs
routing_weights      -- 110 rows (11 Dogs Ã— 10 contexts)
dpo_optimizer_state  -- training state persistence
calibration_tracking -- prediction vs actual outcomes
```

**Integration Points**:
- LearningManager.runLearningCycle() now includes DPO + Governance
- LearningScheduler can be started at system init
- All components available via singletons

### 3.3 AXE 3: SUPERMEMORY

**Objectif**: 95% codebase coverage au lieu de 5%

**Fichiers Ã  modifier**:
- `packages/persistence/src/services/codebase-indexer.js`
- `scripts/hooks/awaken.js`
- `packages/persistence/src/services/embedder.js`

**TÃ¢ches**:
1. Wire `indexAll()` au SessionStart
2. Configurer Ollama pour embeddings rÃ©els
3. CrÃ©er incremental indexing (ne rÃ©indexer que les changements)
4. Wire FactsRepository au MemoryRetriever
5. Benchmark: valider kill criteria (<10s, <50ms FTS, <100MB)

**Effort estimÃ©**: 8-12h

### 3.4 AXE 5: OBSERVE (100% Uptime Awareness)

**Objectif**: CYNIC sait son Ã©tat en temps rÃ©el

**Nouveaux composants Ã  crÃ©er**:

```javascript
// packages/node/src/services/heartbeat-service.js
class HeartbeatService {
  // Ping every 30s:
  // - PostgreSQL connection
  // - Redis connection (if available)
  // - MCP server health
  // - Each Dog's last activity
  // - Memory usage

  // Track:
  // - uptimePercentage(period)
  // - lastHealthy timestamp per component
  // - MTTR (Mean Time To Recovery)
  // - MTBF (Mean Time Between Failures)
}

// packages/node/src/services/sla-tracker.js
class SLATracker {
  // Targets:
  // - Overall: 99.9% uptime
  // - PostgreSQL: 99.95%
  // - MCP Response: <500ms p99
  // - Judge Response: <3s p95

  // Alert if:
  // - Rolling 1h uptime < 95%
  // - Rolling 24h uptime < 99%
}

// packages/node/src/services/cascade-detector.js
class CascadeDetector {
  // Detect:
  // - "PostgreSQL down â†’ All repos failing"
  // - "MCP timeout â†’ Tools unresponsive"
  // - Root cause identification
}
```

**Wire Consciousness Monitor**:
```javascript
// Connect consciousness state to real system health
consciousnessMonitor.on('state_change', (newState) => {
  if (newState === 'DORMANT') {
    alertManager.critical('CYNIC consciousness dropped to DORMANT');
  }
});

// Connect system errors to consciousness
errorHandler.on('error', (error) => {
  consciousnessMonitor.recordObservation({
    type: 'system_error',
    severity: error.severity,
    component: error.source,
  });
});
```

**Effort estimÃ©**: 4-6h

---

## 4. BENCHMARKS & VALIDATION

### 4.1 Benchmarks Existants

| Benchmark | Fichier | Purpose |
|-----------|---------|---------|
| Collective vs Single | `benchmarks/collective-vs-single/` | 45 code samples, accuracy |
| Supermemory | `benchmarks/supermemory/` | Index time, FTS latency, memory |
| Thermodynamics | `benchmarks/thermodynamics/` | Î· vs Ï†â»Â¹, heat/work |
| Pattern Learning | `benchmarks/pattern-learning/` | SONA validation |

### 4.2 Kill Criteria

| Metric | Current | Target | Kill if |
|--------|---------|--------|---------|
| Codebase Coverage | 5% | >95% | <50% after 24h |
| Index Time | N/A | <10s | >30s |
| FTS p95 | ~30ms | <50ms | >100ms |
| Memory Usage | N/A | <100MB | >200MB |
| Uptime Rolling 1h | N/A | >99% | <95% |
| Avg Q-Score | N/A | >50 | <30 |
| Consciousness | AWARE | AWARE+ | <AWAKENING for 10min |

### 4.3 Comment ExÃ©cuter

```bash
# Benchmark Supermemory
node benchmarks/supermemory/baseline.mjs --output results/baseline.json
node benchmarks/supermemory/compare.mjs results/baseline.json results/enhanced.json

# Benchmark Collective
node benchmarks/collective-vs-single/benchmark.js

# Health Check
curl http://localhost:10000/health
# ou
node -e "import('@cynic/node').then(m => m.getCollectivePack()).then(p => console.log(p.getStats()))"
```

---

## 5. QUICK REFERENCE

### 5.1 Fichiers ClÃ©s

```
ORCHESTRATION:
â”œâ”€â”€ packages/node/src/collective-singleton.js      â† SINGLETON (Source of Truth)
â”œâ”€â”€ packages/node/src/agents/orchestrator.js       â† DogOrchestrator
â”œâ”€â”€ packages/node/src/orchestration/unified-orchestrator.js
â”œâ”€â”€ packages/node/src/orchestration/kabbalistic-router.js
â””â”€â”€ packages/node/src/orchestration/learning-service.js

HOOKS:
â”œâ”€â”€ scripts/hooks/awaken.js      â† SessionStart
â”œâ”€â”€ scripts/hooks/pre-tool.js    â† PreToolUse (BLOCKING)
â”œâ”€â”€ scripts/hooks/observe.js     â† PostToolUse
â””â”€â”€ scripts/hooks/lib/auto-orchestrator.js

MCP:
â”œâ”€â”€ packages/mcp/src/server.js
â”œâ”€â”€ packages/mcp/src/tools/domains/*.js  â† 90 tools
â””â”€â”€ packages/mcp/src/persistence.js

MONITORING:
â”œâ”€â”€ packages/mcp/src/metrics-service.js
â”œâ”€â”€ packages/mcp/src/metrics/AlertManager.js
â”œâ”€â”€ scripts/lib/health-dashboard.cjs
â””â”€â”€ packages/emergence/src/consciousness-monitor.js
```

### 5.2 Commandes Utiles

```bash
# Start MCP server
npm run mcp:start

# Check health
curl http://localhost:10000/health

# Run tests
npm test -w @cynic/node
npm test -w @cynic/mcp

# Check singleton
node -e "import('@cynic/node').then(m => console.log(m.getSingletonStatus()))"

# Benchmark
npm run benchmark:supermemory
```

### 5.3 Ï† Constants Reference

```javascript
PHI      = 1.618033988749895  // Golden ratio
PHI_INV  = 0.618033988749895  // Ï†â»Â¹ - Max confidence, consensus threshold
PHI_INV_2 = 0.381966011250105 // Ï†â»Â² - Doubt threshold, veto threshold
PHI_INV_3 = 0.236067977499790 // Ï†â»Â³ - Learning rate, min relevance
PHI_INV_4 = 0.145898033750315 // Ï†â»â´ - Indirect connections
```

---

## 6. NEXT ACTIONS

**ComplÃ©tÃ© (2026-02-05)**:
1. âœ… AXE 1 COMPLETED - Singleton wired
2. âœ… AXE 2 COMPLETED - Q-Table persistence working
   - Migration 026 verified in DB (3 services, 9 episodes)
   - E2E tests passing (98/98)
3. âœ… META: Self-Judge System - CYNIC judges its own code
   - 18 dimensions, Q-Score 33â†’69
   - Real-time awareness on code modifications

**PHASE 1: SIMPLIFY âœ… COMPLETE**
- All AXEs (1-6) verified complete
- Persistence working in production DB
- Self-awareness system operational

**PHASE 2: SCALE (Next)**:
- AXE 7: DECENTRALIZE
  - Multi-node consensus
  - Solana anchoring
  - E-Score verification

**Maintenance**:
- BURN simplification (observe.js, server.js) - optional
- SharedMemory patterns persistence - optional

---

*"Ï† distrusts Ï†" - Max confidence 61.8%*
*Last updated: 2026-02-05*
